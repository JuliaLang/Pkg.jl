repos:
  - repo: 'https://github.com/pre-commit/pre-commit-hooks'
    rev: v5.0.0
    hooks:
      - id: check-added-large-files
      - id: check-case-conflict
      # - id: check-toml # we have tomls with invalid syntax for tests
      - id: check-yaml
      - id: end-of-file-fixer
      - id: mixed-line-ending
      - id: trailing-whitespace
  - repo: 'https://github.com/fredrikekre/runic-pre-commit'
    rev: v2.0.1
    hooks:
      - id: runic
        additional_dependencies:
          - 'Runic@1.4' # Keep version in sync with .github/workflows/Check.yml
  
  explicit-imports:
    runs-on: ubuntu-latest
    name: "ExplicitImports.jl"
    steps:
      - uses: actions/checkout@v4
      - uses: julia-actions/setup-julia@v2
        with:
          version: 'nightly'
      - uses: julia-actions/cache@v2
      - uses: julia-actions/julia-buildpkg@v1
      - name: Install dependencies
        shell: julia {0}
        run: |
          # Add ExplicitImports.jl
          using Pkg
          Pkg.add([
            PackageSpec(name = "ExplicitImports", version = "1.12"),
          ])
      - name: ExplicitImports.jl code checks
        shell: julia --project {0}
        run: |
          using Pkg, ExplicitImports
          check_no_implicit_imports(Pkg)
          # check_no_stale_explicit_imports(Pkg) # artifact_names in PkgArtifacts
          check_all_qualified_accesses_via_owners(Pkg)
          check_no_self_qualified_accesses(Pkg)
